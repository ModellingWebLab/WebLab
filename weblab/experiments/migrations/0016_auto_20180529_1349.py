# -*- coding: utf-8 -*-
# Generated by Django 1.11.13 on 2018-05-29 13:49
from __future__ import unicode_literals

from django.db import migrations


def copy_task_id_to_running_experiment(apps, schema_editor):
    RunningExperiment = apps.get_model('experiments', 'RunningExperiment')
    for run in RunningExperiment.objects.all():
        run.task_id = run.experiment_version.task_id
        run.save()


def copy_task_id_from_running_experiment(apps, schema_editor):
    RunningExperiment = apps.get_model('experiments', 'RunningExperiment')
    for run in RunningExperiment.objects.all():
        run.experiment_version.task_id = run.task_id
        run.experiment_version.save()


class Migration(migrations.Migration):

    dependencies = [
        ('experiments', '0015_runningexperiment_task_id'),
    ]

    operations = [
        migrations.RunPython(
            copy_task_id_to_running_experiment,
            copy_task_id_from_running_experiment
        ),
    ]
