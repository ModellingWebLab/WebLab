# -*- coding: utf-8 -*-
# Generated by Django 1.11.23 on 2020-02-12 17:01
from __future__ import unicode_literals

from django.db import migrations


def populate_exp_version(apps, schema_editor):
    ExperimentVersion = apps.get_model('experiments', 'ExperimentVersion')
    Runnable = apps.get_model('experiments', 'Runnable')
    for runnable in Runnable.objects.all():

        experiment_version = ExperimentVersion(runnable_ptr=runnable,
                                               experiment_key_id=runnable.experiment_id)
        experiment_version.save_base(raw=True)


class Migration(migrations.Migration):
    dependencies = [
        ('experiments', '0026_experimentversion'),
    ]

    operations = [
        migrations.RunPython(populate_exp_version),
    ]
