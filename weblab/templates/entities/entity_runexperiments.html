{% extends "base.html" %}
{% load staticfiles %}
{% load entities %}

{% block title %}Experiment: run specific combinations - {% endblock title %}

{% block body_id %}experiment-run{% endblock %}

{% block content %}
  <h1 id="entityname">Run experiments using <span>{{ entity.name }}</span></h1>
    <!-- SK TO DO add Force overwrite checkbox -->
  <form method="POST" action="">
    {% csrf_token %}

    {{ form.as_p }}

    <!-- SK TO DO: make these work -->
       <input class="overrideCheckBox" type="checkbox" value="True">


    <!-- SK TO DO: make these work -->
    <p>
    <button id="checkallbutton">check all</button>
    <button id="checklatestbutton">check latest</button>
    <button id="uncheckallbutton">uncheck all</button>
    <button id="runexperimentsbutton">run experiments</button>
    </p>
  </form>
  <p>You may run this {{  type }} {{ preposition }} the following {{ other_type }}s.</p>

  <h2> Your {{ other_type }}s</h2>

    <!-- list each entity and all versions of that entity -->
  {% for entity_object in object_list %}

      <strong>{{ entity_object.id }}</strong>

      {% for entity_version in entity_object.versions %}
          <li>
              <p>
                  <input class="experimentCheckBox" type="checkbox" value="true">
                  <strong>
                      <a class="entityversionlink" href="{{ entity|url_version:entity_version.commit }}">
                          {% include "./includes/version_name.html" with tags=entity_version.tags version=entity_version.commit only %}
                      </a>
                  </strong>
                  by <em>{{ entity_version.commit.author }}</em><br />
                  <span class="suppl">
                      <small>created </small> <time>{{ entity_version.commit.committed_at }}</time>
                      {% with entity_version.commit.filenames|length as numfiles %}
                          <small>containing</small> {{ numfiles }} file{{ numfiles|pluralize}}
                      {% endwith %}
                  </span>
                  <br />
                  <span class="suppl">
                      {{ entity_version.commit.message|linebreaksbr }}
                  </span>
              </p>
          </li>
      {% endfor %}
  {%  endfor %}

  <h2> Other {{ other_type }}s</h2>


{% endblock %}
