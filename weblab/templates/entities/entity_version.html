{% extends "base.html" %}
{% load static %}
{% load entities %}

{% block content %}
  <h1 id="entityname">
    <small>{{ type|capfirst }}: </small><span>{{ entity.name }}</span>
  </h1>

  <div class="suppl">
    <small>Created <time>{{entity.creation_date}}</time> by <em>{{entity.author.full_name}}</em>.
    <br>

    {% can_delete_entity entity as can_delete %}
    {% if can_delete %}
      Delete {{ entity_type }}:
      <a title="delete all versions of this {{ type }}" href="{{ entity|url_delete }}">
        <img src="{% static 'res/img/delete.png' %}" alt="delete all versions of this {{ type }}"
                                                     title="delete all versions of this {{type}}"/></a>
      <br>
    {% endif %}
    Visibility: {{ entity.visibility }}
    </small>
  </div>

  <div id="entityversion">
    <div>
      <small><a href="{{ entity|url_versions }}">all versions</a></small>
    </div>
    <h2 id="entityversionname">
      {% if tag %}
        <b>{{ tag.name }}</b> <span class="suppl"><small>({{ version.hexsha }})</small></span>
      {% else %}
        <b>{{ version.hexsha }}</b>
      {% endif %}
    </h2>
    <div class="suppl">
      <small>
        Created <time id="entityversiontime">{{ version.committed_date|as_datetime }}</time>
        by <em id="entityversionauthor">{{ version.author }}</em>.
      </small>
    </div>

    <div id="entityversiondetails">

      <div id="entityversionfiles">
        <h3>Files attached to this version</h3>

       {% include "entities/includes/version_files.html" %}

      </div>

    </div>
  </div>

{% endblock %}
