{% extends "base.html" %}
{% load staticfiles %}
{% load stories %}

{% block title %}Story {{ object.title }} - {% endblock title %}
{% block content %}

<a href="{% url 'stories:story_edit' object.id %}"><h1>Story: {{ object.title }}</h1></a>
<small>Created <time>{{object.created_at}}</time> by <em>{{object.author.full_name}}</em>.

{% can_manage_story object as can_manage %}
{% if can_manage %}
  <a title="Edit story" href="{% url 'stories:story_edit' object.id %}">
    Edit story
  </a>
{% endif %}

<div id='storyrender'>
{% for part in storyparts %}
    {% if part.description %}
       <div class="markdowrenderview">
         <textarea class="markdownsource">{{part.description | safe}}</textarea>
       </div>
    {% else %}

{% load experiments %}
<h1 id="heading">Comparison</h1>
<input type="hidden" id="entityIdsToCompare" value="{%url 'experiments:compare' part.experiment_versions%}/show/{{ part.graphfilename }}/displayPlotFlot">
 <div class="entitiesToCompare" id="{{ forloop.counter0 }}entitiesToCompare" data-comparison-href="{% url 'experiments:compare_json' part.experiment_versions %}">
    loading...
    </div>
    <div id="filedetails">
      <div class="closebtn"><small>
          <a id="exportPlot" style="display: none;">Export plot data</a> |
          <a id="fileclose">&otimes; close</a>
      </small></div>
        <h3 id="filename"></h3>
        <div id="filedisplay"></div>
    </div>

    <div id="files">
      <h3 id="outputFileHeadline"></h3>
      <table id="filestable">
    </table>
  </div>

    {% endif %}
{%endfor%}

</div>
{% endblock %}

https://marked.js.org/using_advanced#highlight
