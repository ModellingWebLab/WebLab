!function(e){var t={},r=/^(([a-z][\-a-z0-9+\.]*):)?(\/\/([^\/?#]+))?([^?#]*)?(\?([^#]*))?(#(.*))?$/i,n=function(e){var t=e.match(r);if(null===t)throw"Malformed URI: "+e;return{scheme:t[1]?t[2].toLowerCase():void 0,authority:t[3]?t[4]:void 0,path:t[5]||"",query:t[6]?t[7]:void 0,fragment:t[8]?t[9]:void 0}},i=function(e){var t="",r=[];if(/\./.test(e)){for(;void 0!==e&&""!==e;)"."===e||".."===e?e="":/^\.\.\//.test(e)?e=e.substring(3):/^\.\//.test(e)?e=e.substring(2):/^\/\.(\/|$)/.test(e)?e="/"+e.substring(3):/^\/\.\.(\/|$)/.test(e)?(e="/"+e.substring(4),t=t.replace(/\/?[^\/]+$/,"")):(r=e.match(/^(\/?[^\/]*)(\/.*)?$/),e=r[2],t+=r[1]);return t}return e},a=function(e,t){return""===e.authority||void 0!==e.path&&""!==e.path?e.path.replace(/[^\/]+$/,"")+t:"/"+t};e.uri=function(r,n){var i;return r=r||"",t[r]?t[r]:(n=n||e.uri.base(),"string"==typeof n&&(n=e.uri.absolute(n)),i=new e.uri.fn.init(r,n),t[i]?t[i]:(t[i]=i,i))},e.uri.fn=e.uri.prototype={scheme:void 0,authority:void 0,path:void 0,query:void 0,fragment:void 0,init:function(t,r){if(r=r||{},e.extend(this,n(t)),void 0===this.scheme&&(this.scheme=r.scheme,void 0!==this.authority?this.path=i(this.path):(this.authority=r.authority,""===this.path?(this.path=r.path,void 0===this.query&&(this.query=r.query)):(/^\//.test(this.path)||(this.path=a(r,this.path)),this.path=i(this.path)))),void 0===this.scheme)throw"Malformed URI: URI is not an absolute URI and no base supplied: "+t;return this},resolve:function(t){return e.uri(t,this)},relative:function(t){var r,n,i,a=0,s=[],o="";if("string"==typeof t&&(t=e.uri(t,{})),t.scheme!==this.scheme||t.authority!==this.authority)return t.toString();if(t.path!==this.path){if(r=t.path.split("/"),n=this.path.split("/"),r[1]!==n[1])o=t.path;else{for(;r[a]===n[a];)a+=1;for(i=a;a<n.length-1;a+=1)s.push("..");for(;i<r.length;i+=1)s.push(r[i]);o=s.join("/")}return o=void 0===t.query?o:o+"?"+t.query,o=void 0===t.fragment?o:o+"#"+t.fragment}return void 0!==t.query&&t.query!==this.query?"?"+t.query+(void 0===t.fragment?"":"#"+t.fragment):void 0!==t.fragment&&t.fragment!==this.fragment?"#"+t.fragment:""},toString:function(){var e="";return this._string?this._string:(e=void 0===this.scheme?e:e+this.scheme+":",e=void 0===this.authority?e:e+"//"+this.authority,e+=this.path,e=void 0===this.query?e:e+"?"+this.query,e=void 0===this.fragment?e:e+"#"+this.fragment,this._string=e,e)}},e.uri.fn.init.prototype=e.uri.fn,e.uri.absolute=function(t){return e.uri(t,{})},e.uri.resolve=function(t,r){return e.uri(t,r)},e.uri.relative=function(t,r){return e.uri(r,{}).relative(t)},e.uri.base=function(){return e(document).base()},e.fn.base=function(){var t=e(this).parents().andSelf().find("base").attr("href"),r=e(this)[0].ownerDocument||document,n=e.uri.absolute(null===r.location?document.location.href:r.location.href);return void 0===t?n:e.uri(t,n)}}(jQuery),function(e){var t="http://www.w3.org/XML/1998/namespace",r="http://www.w3.org/2000/xmlns/",n=/\sxmlns(?::([^ =]+))?\s*=\s*(?:"([^"]*)"|'([^']*)')/g,i="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",a="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",s=new RegExp("^"+a+i+"*$");e.fn.xmlns=function(i,a,o){var u,d,p,l,c,f=this.eq(0),h=f.data("xmlns"),v=f[0],m=i?"xmlns:"+i:"xmlns",b=!1;if(void 0===a){if(void 0===i){if(!h){if(h={},v.attributes&&v.attributes.getNamedItemNS)for(p=0;p<v.attributes.length;p+=1)u=v.attributes[p],/^xmlns(:(.+))?$/.test(u.nodeName)&&(i=/^xmlns(:(.+))?$/.exec(u.nodeName)[2]||"",l=u.nodeValue,(""===i||""!==l&&l!==t&&l!==r&&s.test(i)&&"xml"!==i&&"xmlns"!==i)&&(h[i]=e.uri(u.nodeValue),b=!0));else{for(c=/<[^>]+>/.exec(v.outerHTML),u=n.exec(c);null!==u;)i=u[1]||"",l=u[2]||u[3],(""===i||""!==l&&l!==t&&l!==r&&s.test(i)&&"xml"!==i&&"xmlns"!==i)&&(h[i]=e.uri(u[2]||u[3]),b=!0),u=n.exec(c);n.lastIndex=0}o=o||(1===v.parentNode.nodeType?f.parent().xmlns():{}),h=b?e.extend({},o,h):o,f.data("xmlns",h)}return h}if("object"==typeof i){for(d in i)"string"==typeof i[d]&&s.test(d)&&this.xmlns(d,i[d]);return this.find("*").andSelf().removeData("xmlns"),this}return h||(h=f.xmlns()),h[i]}return this.find("*").andSelf().removeData("xmlns"),this.attr(m,a)},e.fn.removeXmlns=function(e){var t,r,n;if("object"==typeof e)if(void 0===e.length)for(r in e)"string"==typeof e[r]&&this.removeXmlns(r);else for(n=0;n<e.length;n+=1)this.removeXmlns(e[n]);else t=e?"xmlns:"+e:"xmlns",this.removeAttr(t);return this.find("*").andSelf().removeData("xmlns"),this},e.fn.qname=function(e){var t,r,n;if(void 0===e&&(e=void 0===this[0].outerHTML?this[0].nodeName.toLowerCase():/<([^ >]+)/.exec(this[0].outerHTML)[1].toLowerCase()),"?xml:namespace"===e)throw"XMLinHTML: Unable to get the prefix to resolve the name of this element";if(t=/^(([^:]+):)?([^:]+)$/.exec(e),r=t[2]||"",n=this.xmlns(r),void 0===n&&""!==r)throw"MalformedQName: The prefix "+r+" is not declared";return{namespace:n,localPart:t[3],prefix:r,name:e}}}(jQuery),function(e){var t=function(e){return e.replace(/[ \t\n\r]+/," ").replace(/^ +/,"").replace(/ +$/,"")};e.typedValue=function(t,r){return e.typedValue.fn.init(t,r)},e.typedValue.fn=e.typedValue.prototype={representation:void 0,value:void 0,datatype:void 0,init:function(r,n){var i=e.typedValue.types[n];if(e.typedValue.valid(r,n))return this.representation=r,this.datatype=n,this.value=void 0===i?t(r):i.value(i.strip?t(r):r),this;throw{name:"InvalidValue",message:r+" is not a valid "+n+" value"}}},e.typedValue.fn.init.prototype=e.typedValue.fn,e.typedValue.types={},e.typedValue.types["http://www.w3.org/2001/XMLSchema#string"]={regex:/^.*$/,strip:!1,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#token"]={regex:/^.*$/,strip:!0,value:function(e){return t(e)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#NCName"]={regex:/^[a-z_][-\.a-z0-9]+$/i,strip:!0,value:function(e){return t(e)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#boolean"]={regex:/^(?:true|false|1|0)$/,strip:!0,value:function(e){return"true"===e||"1"===e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#decimal"]={regex:/^[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)$/,strip:!0,value:function(e){return e=e.replace(/^0+/,"").replace(/0+$/,""),""===e&&(e="0.0"),"."===e.substring(0,1)&&(e="0"+e),/\.$/.test(e)?e+="0":/\./.test(e)||(e+=".0"),e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#integer"]={regex:/^[\-\+]?[0-9]+$/,strip:!0,value:function(e){return parseInt(e,10)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#int"]={regex:/^[\-\+]?[0-9]+$/,strip:!0,value:function(e){return parseInt(e,10)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#float"]={regex:/^(?:[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)(?:[eE][\-\+]?[0-9]+)?|[\-\+]?INF|NaN)$/,strip:!0,value:function(e){return"-INF"===e?-1/0:"INF"===e||"+INF"===e?1/0:parseFloat(e)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#double"]={regex:e.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].regex,strip:!0,value:e.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].value},e.typedValue.types["http://www.w3.org/2001/XMLSchema#duration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)?S)?)$/,validate:function(e){var t=this.regex.exec(e);return t[2]||t[3]||t[4]||t[5]||t[6]||t[7]},strip:!0,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#yearMonthDuration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/,validate:function(e){var t=this.regex.exec(e);return t[2]||t[3]},strip:!0,value:function(e){var t=this.regex.exec(e),r=t[2]||0,n=t[3]||0;return n+=12*r,"-"===t[1]?-1*n:n}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#dateTime"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):(([0-9]{2})(\.([0-9]+))?)((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var t,r=this.regex.exec(e),n=parseInt(r[1],10),i=void 0===r[10]||"Z"===r[10]?"+0000":r[10].replace(/:/,"");if(0===n||parseInt(i,10)<-1400||parseInt(i,10)>1400)return!1;try{if(n=100>n?Math.abs(n)+1e3:n,month=parseInt(r[2],10),day=parseInt(r[3],10),day>31)return!1;if(day>30&&1!==month&&3!==month&&5!==month&&7!==month&&8!==month&&10!==month&&12!==month)return!1;if(2===month){if(day>29)return!1;if(29===day&&(n%4!==0||n%100===0&&n%400!==0))return!1}return t=""+n+"/"+r[2]+"/"+r[3]+" "+r[4]+":"+r[5]+":"+r[7]+" "+i,t=new Date(t),!0}catch(a){return!1}},strip:!0,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#date"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var t=this.regex.exec(e),r=parseInt(t[1],10),n=parseInt(t[2],10),i=parseInt(t[3],10),a=void 0===t[10]||"Z"===t[10]?"+0000":t[10].replace(/:/,"");return 0===r||n>12||i>31||parseInt(a,10)<-1400||parseInt(a,10)>1400?!1:!0},strip:!0,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#gYear"]={regex:/^-?([0-9]{4,})$/,validate:function(e){var t=parseInt(e,10);return 0!==t},strip:!0,value:function(e){return parseInt(e,10)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#gMonthDay"]={regex:/^--([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var t=this.regex.exec(e),r=parseInt(t[1],10),n=parseInt(t[2],10),i=void 0===t[3]||"Z"===t[3]?"+0000":t[3].replace(/:/,"");return r>12||n>31||parseInt(i,10)<-1400||parseInt(i,10)>1400?!1:2===r&&n>29?!1:(4===r||6===r||9===r||11===r)&&n>30?!1:!0},strip:!0,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#anyURI"]={regex:/^.*$/,strip:!0,value:function(t,r){var n=e.extend({},e.typedValue.defaults,r);return e.uri.resolve(t,n.base)}},e.typedValue.defaults={base:e.uri.base(),namespaces:{}},e.typedValue.valid=function(r,n){var i=e.typedValue.types[n];return void 0===i?!0:(r=i.strip?t(r):r,i.regex.test(r)?void 0===i.validate?!0:i.validate(r):!1)}}(jQuery),function(e){e.curie=function(t,r){var n=e.extend({},e.curie.defaults,r||{}),i=/^(([^:]*):)?(.+)$/.exec(t),a=i[2],s=i[3],o=n.namespaces[a];if(/^:.+/.test(t)){if(void 0===n.reservedNamespace||null===n.reservedNamespace)throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+t;o=n.reservedNamespace}else if(a){if(void 0===o)throw"Malformed CURIE: No namespace binding for "+a+" in CURIE "+t}else if("lower"===n.charcase?t=t.toLowerCase():"upper"===n.charcase&&(t=t.toUpperCase()),n.reserved.length&&e.inArray(t,n.reserved)>=0)o=n.reservedNamespace,s=t;else{if(void 0===n.defaultNamespace||null===n.defaultNamespace)throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+t;o=n.defaultNamespace}return e.uri(o+s)},e.curie.defaults={namespaces:{},reserved:[],reservedNamespace:void 0,defaultNamespace:void 0,charcase:"preserve"},e.safeCurie=function(t,r){var n=/^\[([^\]]+)\]$/.exec(t);return n?e.curie(n[1],r):e.uri(t)},e.createCurie=function(t,r){var n,i=e.extend({},e.curie.defaults,r||{}),a=i.namespaces;if(t=e.uri(t).toString(),void 0!==i.reservedNamespace&&t.substring(0,i.reservedNamespace.toString().length)===i.reservedNamespace.toString()?(n=t.substring(i.reservedNamespace.toString().length),-1===e.inArray(n,i.reserved)&&(n=":"+n)):e.each(a,function(e,r){return t.substring(0,r.toString().length)===r.toString()?(n=e+":"+t.substring(r.toString().length),null):void 0}),void 0===n)throw"No Namespace Binding: There's no appropriate namespace binding for generating a CURIE from "+t;return n},e.fn.curie=function(t,r){var n=e.extend({},e.fn.curie.defaults,{namespaces:this.xmlns()},r||{});return e.curie(t,n)},e.fn.safeCurie=function(t,r){var n=e.extend({},e.fn.curie.defaults,{namespaces:this.xmlns()},r||{});return e.safeCurie(t,n)},e.fn.createCurie=function(t,r){var n=e.extend({},e.fn.curie.defaults,{namespaces:this.xmlns()},r||{});return e.createCurie(t,n)},e.fn.curie.defaults={reserved:["alternate","appendix","bookmark","cite","chapter","contents","copyright","first","glossary","help","icon","index","last","license","meta","next","p3pv1","prev","role","section","stylesheet","subsection","start","top","up"],reservedNamespace:"http://www.w3.org/1999/xhtml/vocab#",defaultNamespace:void 0,charcase:"lower"}}(jQuery),function(e){var t={},r={},n={},a={},s={},o="http://www.w3.org/2001/XMLSchema#",u="http://www.w3.org/1999/02/22-rdf-syntax-ns#",d="http://www.w3.org/2000/01/rdf-schema#",l=/^<(([^>]|\\>)*)>$/,c=/^("""((\\"|[^"])*)"""|"((\\"|[^"])*)")(@([a-z]+(-[a-z0-9]+)*)|\^\^(.+))?$/,f=/(("""((\\"|[^"])*)""")|("(\\"|[^"]|)*")|(<(\\>|[^>])*>)|\S)+/g,h=databankSeed=(new Date).getTime()%1e3,m=function(){return h+=1,"b"+h.toString(16)},b=function(){return databankSeed+=1,"data"+databankSeed.toString(16)},g={},y={},x=function(t,r){if("string"!=typeof t)return t;try{return e.rdf.resource(t,r)}catch(n){try{return e.rdf.blank(t,r)}catch(i){throw"Bad Triple: Subject "+t+" is not a resource: "+i}}},w=function(t,r){if("a"===t)return e.rdf.type;if("string"!=typeof t)return t;try{return e.rdf.resource(t,r)}catch(n){throw"Bad Triple: Property "+t+" is not a resource: "+n}},j=function(t,r){if("string"!=typeof t)return t;try{return e.rdf.resource(t,r)}catch(n){try{return e.rdf.blank(t,r)}catch(i){try{return e.rdf.literal(t,r)}catch(a){throw"Bad Triple: Object "+t+" is not a resource or a literal "+a}}}},I=function(e,t,r){var n;return"string"==typeof t?(n=t.substring(1),r[n]&&r[n]!==e?null:(r[n]=e,r)):t===e?r:null},S=function(t,r){if(void 0===t.union){if(void 0!==r.subject.type)return void 0===t.subjectIndex[r.subject]?[]:e.map(t.subjectIndex[r.subject],function(e){var t=r.exec(e);return null===t?null:{bindings:t,triples:[e]}});if("uri"===r.object.type||"bnode"===r.object.type)return void 0===t.objectIndex[r.object]?[]:e.map(t.objectIndex[r.object],function(e){var t=r.exec(e);return null===t?null:{bindings:t,triples:[e]}});if(void 0!==r.property.type)return void 0===t.propertyIndex[r.property]?[]:e.map(t.propertyIndex[r.property],function(e){var t=r.exec(e);return null===t?null:{bindings:t,triples:[e]}})}return e.map(t.triples(),function(e){var t=r.exec(e);return null===t?null:{bindings:t,triples:[e]}})},M=function(t,r,n){return e.map(t,function(t){var i=e.map(r,function(e){var r,n,i=!0;for(r in e.bindings)if(n=e.bindings[r],void 0!==t.bindings[r]&&t.bindings[r]!==n){i=!1;break}return i?e:null});return i.length>0?e.map(i,function(r){return{bindings:e.extend({},t.bindings,r.bindings),triples:O(t.triples.concat(r.triples))}}):n?t:null})},k=function(t,r){var n,i,a;void 0===r.filterExp||e.isFunction(r.filterExp)||(void 0===t.union?(n="string"==typeof r.filterExp.subject?"":r.filterExp.subject,i="string"==typeof r.filterExp.property?"":r.filterExp.property,a="string"==typeof r.filterExp.object?"":r.filterExp.object,void 0===t.queries[n]&&(t.queries[n]={}),void 0===t.queries[n][i]&&(t.queries[n][i]={}),void 0===t.queries[n][i][a]&&(t.queries[n][i][a]=[]),t.queries[n][i][a].push(r)):e.each(t.union,function(e,t){k(t,r)}))},N=function(t){t.length=0,t.matches=[],e.each(t.children,function(e,t){N(t)}),e.each(t.partOf,function(e,t){N(t)})},q=function(t,r){r.length>0&&(e.each(t.children,function(e,t){E(t,r)}),e.each(t.partOf,function(e,t){q(t,r)}),e.each(r,function(e,r){t.matches.push(r),Array.prototype.push.call(t,r.bindings)}))},L=function(e,t){var r,n,i,a,s,o,u,d=t.length,p={},l={},c={},f=[];for(r=0;r<e.length;r+=1)for(n=e[r].bindings,i=e[r].triples,l=c,a=0;d>a;a+=1)if(o=t[a],u=n[o],a===d-1)if(void 0===l[u]){for(p={bindings:{},triples:i},s=0;d>s;s+=1)p.bindings[t[s]]=n[t[s]];l[u]=p,f.push(p)}else p=l[u],p.triples=p.triples.concat(i);else void 0===l[u]&&(l[u]={}),l=l[u];return f},V=function(e,t){var r,n,i,a={},s=[];for(r=0;r<e.length;r+=1)n=e[r],void 0===a[n.bindings[t]]?(i={bindings:{node:n.bindings[t]},triples:n.triples},s.push(i),a[n.bindings[t]]=i):(i=a[n.bindings[t]],i.triples=i.triples.concat(n.triples));return s},E=function(t,r){var n;void 0===t.union?t.top||t.parent.top?n=t.alphaMemory:(r=r||t.parent.matches,n=e.isFunction(t.filterExp)?e.map(r,function(e,r){return t.filterExp.call(e.bindings,r,e.bindings,e.triples)?e:null}):void 0!==t.filterExp?M(r,t.alphaMemory,t.filterExp.optional):r):n=e.map(t.union,function(e){return e.matches}),void 0!==t.selections?n=L(n,t.selections):void 0!==t.navigate&&(n=V(n,t.navigate)),q(t,n)},X=function(e,t){var r;e.filterExp.optional?(N(e),E(e)):(r=e.top||e.parent.top?[t]:M(e.parent.matches,[t],!1),q(e,r))},D=function(e,t){var r,n=e.filterExp.exec(t);null!==n&&(r={triples:[t],bindings:n},e.alphaMemory.push(r),X(e,r))},$=function(t,r){t.alphaMemory.splice(e.inArray(r,t.alphaMemory),1),N(t),E(t)},R=function(t,r){e.each(t,function(e,t){D(t,r)})},C=function(t,r){e.each(t,function(e,t){$(t,r)})},T=function(t,r){var n=r.subject,i=r.property,a=r.object;void 0===t.union?(void 0!==t.queries[n]&&(void 0!==t.queries[n][i]&&(void 0!==t.queries[n][i][a]&&R(t.queries[n][i][a],r),void 0!==t.queries[n][i][""]&&R(t.queries[n][i][""],r)),void 0!==t.queries[n][""]&&(void 0!==t.queries[n][""][a]&&R(t.queries[n][""][a],r),void 0!==t.queries[n][""][""]&&R(t.queries[n][""][""],r))),void 0!==t.queries[""]&&(void 0!==t.queries[""][i]&&(void 0!==t.queries[""][i][a]&&R(t.queries[""][i][a],r),void 0!==t.queries[""][i][""]&&R(t.queries[""][i][""],r)),void 0!==t.queries[""][""]&&(void 0!==t.queries[""][""][a]&&R(t.queries[""][""][a],r),void 0!==t.queries[""][""][""]&&R(t.queries[""][""][""],r)))):e.each(t.union,function(e,t){T(t,r)})},U=function(t,r){var n=r.subject,i=r.property,a=r.object;void 0===t.union?(void 0!==t.queries[n]&&(void 0!==t.queries[n][i]&&(void 0!==t.queries[n][i][a]&&C(t.queries[n][i][a],r),void 0!==t.queries[n][i][""]&&C(t.queries[n][i][""],r)),void 0!==t.queries[n][""]&&(void 0!==t.queries[n][""][a]&&C(t.queries[n][""][a],r),void 0!==t.queries[n][""][""]&&C(t.queries[n][""][""],r))),void 0!==t.queries[""]&&(void 0!==t.queries[""][i]&&(void 0!==t.queries[""][i][a]&&C(t.queries[""][i][a],r),void 0!==t.queries[""][i][""]&&C(t.queries[""][i][""],r)),void 0!==t.queries[""][""]&&(void 0!==t.queries[""][""][a]&&C(t.queries[""][""][a],r),void 0!==t.queries[""][""][""]&&C(t.queries[""][""][""],r)))):e.each(t.union,function(e,t){U(t,r)})},A=function(t,r,n){var i,a,s=r[0],o={},u=[];if(n=n||{},0===r.length){for(i=0;i<t.length;i+=1)for(v in t[i])void 0===n[v]&&(n[v]=[]),e.isArray(n[v])&&n[v].push(t[i][v]);return[n]}for(i=0;i<t.length;i+=1)key=t[i][s],void 0===o[key]&&(o[key]=[]),o[key].push(t[i]);r=r.splice(1,1);for(v in o)a=e.extend({},n),a[s]=o[v][0][s],u=u.concat(A(o[v],r,a));return u},z=function(e,t,r){return void 0===y[e.id]&&(y[e.id]={}),void 0===y[e.id][t]?(y[e.id][t]=r,!1):!0},F=function(t,r,n,i){var a=y[t.id][r];e.isFunction(a[n])&&a[n].call(t,i),y[t.id][r]=void 0},O=function(e){for(var t=[],r=e.length,n=0;r>n;n++){for(var i=n+1;r>i;i++)e[n]===e[i]&&(i=++n);t.push(e[n])}return t};e.typedValue.types["http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"]={regex:/^.*$/m,strip:!1,value:function(e){return e}},e.rdf=function(t){return new e.rdf.fn.init(t)},e.rdf.fn=e.rdf.prototype={rdfquery:"1.1",init:function(t){var r,n;if(t=t||{},this.parent=t.parent,this.union=t.union,this.top=void 0===this.parent&&void 0===this.union,void 0===this.union?this.databank=void 0===t.databank?void 0===this.parent?e.rdf.databank(t.triples,t):this.parent.databank:t.databank:(r=e.map(this.union,function(e){return e.databank}),r=O(r),this.databank=void 0!==r[1]?e.rdf.databank(void 0,{union:r}):r[0]),this.children=[],this.partOf=[],this.filterExp=t.filter,this.selections=t.distinct,this.navigate=t.navigate,this.alphaMemory=[],this.matches=[],this.length=0,void 0!==this.filterExp)e.isFunction(this.filterExp)||(k(this.databank,this),this.alphaMemory=S(this.databank,this.filterExp));else if(void 0!==t.nodes)for(this.alphaMemory=[],n=0;n<t.nodes.length;n+=1)this.alphaMemory.push({bindings:{node:t.nodes[n]},triples:[]});return E(this),this},base:function(e){return void 0===e?this.databank.base():(this.databank.base(e),this)},prefix:function(e,t){return void 0===t?this.databank.prefix(e):(this.databank.prefix(e,t),this)},add:function(t,r){var n,i;if(void 0!==t.rdfquery){if(t.top)return i=this.databank.add(t.databank),n=e.rdf({parent:this.parent,databank:i});if(this.top)return i=t.databank.add(this.databank),n=e.rdf({parent:t.parent,databank:i});if(void 0===this.union)return n=e.rdf({union:[this,t]}),this.partOf.push(n),t.partOf.push(n),n;this.union.push(t),t.partOf.push(this)}else"string"==typeof t&&(r=e.extend({},{base:this.base(),namespaces:this.prefix(),source:t},r),t=e.rdf.pattern(t,r)),t.isFixed()?this.databank.add(t.triple(),r):(n=this,this.each(function(e,i){var a=t.triple(i);null!==a&&n.databank.add(a,r)}));return this},remove:function(t,r){return"string"==typeof t&&(r=e.extend({},{base:this.base(),namespaces:this.prefix()},r),t=e.rdf.pattern(t,r)),t.isFixed()?this.databank.remove(t.triple(),r):(query=this,this.each(function(e,n){var i=t.triple(n);null!==i&&query.databank.remove(i,r)})),this},load:function(e,t){var r=this,t=t||{},n=t.success;return void 0!==n&&(t.success=function(){n.call(r)}),this.databank.load(e,t),this},except:function(e){var t=e.sources();return this.filter(function(){for(i=0;i<t.length;i++){var e=t[i][0].subject;if(e==this.ann)return!1}return!0})},where:function(t,r){var n,i,a,s;return r=r||{},"string"==typeof t&&(i=r.base||this.base(),a=e.extend({},this.prefix(),r.namespaces||{}),s=r.optional||!1,t=e.rdf.pattern(t,{namespaces:a,base:i,optional:s})),n=e.rdf(e.extend({},r,{parent:this,filter:t})),this.children.push(n),n},optional:function(t,r){return this.where(t,e.extend({},r||{},{optional:!0}))},about:function(e,t){return this.where(e+" ?property ?value",t)},filter:function(t,r){var n,i;return n="string"==typeof t?r.constructor===RegExp?function(){return r.test(this[t].value)}:function(){return"literal"===this[t].type?this[t].value===r:this[t]===r}:t,i=e.rdf({parent:this,filter:n}),this.children.push(i),i},node:function(t){var r,n;return"?"===t.toString().substring(0,1)?(r=t.toString().substring(1),n=e.rdf({parent:this,navigate:r})):("string"==typeof t&&(t=j(t,{namespaces:this.prefix(),base:this.base()})),n=e.rdf({parent:this,nodes:[t]})),this.children.push(n),n},find:function(e){return this.where("?node "+e+" ?object",{navigate:"object"})},back:function(e){return this.where("?subject "+e+" ?node",{navigate:"subject"})},group:function(t){return e.isArray(t)||(t=[t]),e(A(this,t))},select:function(e){var t,r,n=[];for(t=0;t<this.length;t+=1)if(void 0===e)n[t]=this[t];else for(n[t]={},r=0;r<e.length;r+=1)n[t][e[r]]=this[t][e[r]];return n},describe:function(e){var t,r,n,i=[];for(t=0;t<e.length;t+=1)if(n=e[t],"?"===n.substring(0,1))for(n=n.substring(1),r=0;r<this.length;r+=1)i.push(this[r][n]);else i.push(n);return this.databank.describe(i)},eq:function(e){return this.filter(function(t){return t===e})},reset:function(){for(var e=this;void 0!==e.parent;)e=e.parent;return e},end:function(){return this.parent},size:function(){return this.length},sources:function(){return e(e.map(this.matches,function(e){return[e.triples]}))},dump:function(t){var r=e.map(this.matches,function(e){return e.triples});return t=e.extend({namespaces:this.databank.namespaces,base:this.databank.base},t||{}),e.rdf.dump(r,t)},get:function(t){return void 0===t?e.makeArray(this):this[t]},each:function(t){return e.each(this.matches,function(e,r){t.call(r.bindings,e,r.bindings,r.triples)}),this},map:function(t){return e(e.map(this.matches,function(e,r){return t.call(e.bindings,r,e.bindings,e.triples)}))},jquery:function(){return e(this)}},e.rdf.fn.init.prototype=e.rdf.fn,e.rdf.gleaners=[],e.rdf.parsers={},e.rdf.dump=function(t,r){var n,i,a,s=e.extend({},e.rdf.dump.defaults,r||{}),o=s.format,u=s.serialize;if(i=e.rdf.parsers[o],void 0===i){a=[];for(p in e.rdf.parsers)a.push(p);throw"Unrecognised dump format: "+o+". Expected one of "+a.join(", ")}return n=i.dump(t,s),u?i.serialize(n):n},e.rdf.dump.defaults={format:"application/json",serialize:!1,indent:!1,namespaces:{}},e.fn.rdf=function(t){var r=[],t=t||function(){return this};return e(this)[0]&&9===e(this)[0].nodeType?e(this).children("*").rdf(t):e(this).length>0?(r=e(this).map(function(r,n){return e.map(e.rdf.gleaners,function(r){return r.call(e(n),{callback:t})})}),e.rdf({triples:r,namespaces:e(this).xmlns()})):e.rdf()},e.extend(e.expr[":"],{about:function(t,r,n){var i=e(t),a=n[3]?i.safeCurie(n[3]):null,s=!1;return e.each(e.rdf.gleaners,function(e,t){return s=t.call(i,{about:a}),s?null:void 0}),s},type:function(t,r,n){var i=e(t),a=n[3]?i.curie(n[3]):null,s=!1;return e.each(e.rdf.gleaners,function(e,t){return t.call(i,{type:a})?(s=!0,null):void 0}),s}}),e.rdf.databank=function(t,r){return new e.rdf.databank.fn.init(t,r)},e.rdf.databank.fn=e.rdf.databank.prototype={init:function(t,r){var n;if(t=t||[],r=r||{},this.id=b(),g[this.id]=this,void 0===r.union)for(this.queries={},this.tripleStore=[],this.subjectIndex={},this.propertyIndex={},this.objectIndex={},this.baseURI=r.base||e.uri.base(),this.namespaces=e.extend({},r.namespaces||{}),n=0;n<t.length;n+=1)this.add(t[n]);else this.union=r.union;return this},base:function(t){return void 0===this.union?void 0===t?this.baseURI:(this.baseURI=t,this):void 0===t?this.union[0].base():(e.each(this.union,function(e,r){r.base(t)}),this)},prefix:function(t,r){var n={};return void 0===this.union?void 0===t?this.namespaces:void 0===r?this.namespaces[t]:(this.namespaces[t]=r,this):void 0===r?(e.each(this.union,function(t,r){e.extend(n,r.prefix())}),void 0===t?n:n[t]):(e.each(this.union,function(e,n){n.prefix(t,r)}),this)},add:function(t,r){var n,i=r&&r.base||this.base(),a=e.extend({},this.prefix(),r&&r.namespaces||{}),s=r&&r.depth||e.rdf.databank.defaults.depth,o=r&&r.proxy||e.rdf.databank.defaults.proxy;return t===this?this:void 0!==t.subjectIndex?void 0===this.union?n=e.rdf.databank(void 0,{union:[this,t]}):(this.union.push(t),this):("string"==typeof t&&(t=e.rdf.triple(t,{namespaces:a,base:i,source:t})),void 0===this.union?(void 0===this.subjectIndex[t.subject]&&(this.subjectIndex[t.subject]=[],s>0&&"uri"===t.subject.type&&this.load(t.subject.value,{depth:s-1,proxy:o})),void 0===this.propertyIndex[t.property]&&(this.propertyIndex[t.property]=[],s>0&&this.load(t.property.value,{depth:s-1,proxy:o})),-1===e.inArray(t,this.subjectIndex[t.subject])&&(this.tripleStore.push(t),this.subjectIndex[t.subject].push(t),this.propertyIndex[t.property].push(t),("uri"===t.object.type||"bnode"===t.object.type)&&(void 0===this.objectIndex[t.object]&&(this.objectIndex[t.object]=[],s>0&&"uri"===t.object.type&&this.load(t.object.value,{depth:s-1,proxy:o})),this.objectIndex[t.object].push(t)),T(this,t))):e.each(this.union,function(e,r){r.add(t)}),this)},remove:function(t,r){var n,i,a,s=r&&r.base||this.base(),o=e.extend({},this.prefix(),r&&r.namespaces||{});return"string"==typeof t&&(t=e.rdf.triple(t,{namespaces:o,base:s,source:t})),this.tripleStore.splice(e.inArray(t,this.tripleStore),1),n=this.subjectIndex[t.subject],void 0!==n&&n.splice(e.inArray(t,n),1),i=this.propertyIndex[t.property],void 0!==i&&i.splice(e.inArray(t,i),1),("uri"===t.object.type||"bnode"===t.object.type)&&(a=this.objectIndex[t.object],void 0!==a&&a.splice(e.inArray(t,a),1)),U(this,t),this},except:function(t){var r=this.triples(),n=t.triples(),i=r.not(n);return e.rdf.databank(i.get(),{namespaces:this.namespaces,base:this.base})},triples:function(){var t=[];return void 0===this.union?t=this.tripleStore:(e.each(this.union,function(e,r){t=t.concat(r.triples().get())}),t=O(t)),e(t)},size:function(){return this.triples().length},describe:function(t){for(var r,n,i,a={},s=[];t.length>0;)if(n=t.pop(),void 0===a[n]){if(void 0===n.value&&(n=e.rdf.resource(n)),void 0!==this.subjectIndex[n])for(r=0;r<this.subjectIndex[n].length;r+=1)i=this.subjectIndex[n][r],s.push(i),"bnode"===i.object.type&&t.push(i.object);if(void 0!==this.objectIndex[n])for(r=0;r<this.objectIndex[n].length;r+=1)i=this.objectIndex[n][r],s.push(i),"bnode"===i.subject.type&&t.push(i.subject);a[n]=!0}return O(s)},dump:function(t){return t=e.extend({namespaces:this.namespaces,base:this.base},t||{}),e.rdf.dump(this.triples(),t)},load:function(t,r){var n,i,a,s,o,u,d=r&&r.format,p=r&&r.async||e.rdf.databank.defaults.async,l=r&&r.success||e.rdf.databank.defaults.success,c=r&&r.error||e.rdf.databank.defaults.error,f=r&&r.proxy||e.rdf.databank.defaults.proxy,h=r&&r.depth||e.rdf.databank.defaults.depth;if(a="string"==typeof t&&"http://"===t.substring(1,7)?e.uri(t):t,a.scheme)return z(this,a,{success:l,error:c})||(s='<script type="text/javascript" src="'+f+"?id="+this.id+"&depth="+h+"&url="+encodeURIComponent(a.resolve("").toString())+'"></script>',p?setTimeout("$('head').append('"+s+"')",0):e("head").append(s)),this;for(void 0===d&&("string"==typeof t?d="{"===t.substring(0,1)?"application/json":"<!DOCTYPE html"===t.substring(0,14)||"<html"===t.substring(0,5)?"application/xhtml+xml":"<?xml"===t.substring(0,5)||"<rdf:RDF"===t.substring(0,8)?"application/rdf+xml":"text/turtle":t.documentElement||t.ownerDocument?(u=t.documentElement?t.documentElement:t.ownerDocument.documentElement,d="html"===u.nodeName?"application/xhtml+xml":"application/rdf+xml"):d="application/json"),o=e.rdf.parsers[d],"string"==typeof t&&(t=o.parse(t)),i=o.triples(t),n=0;n<i.length;n+=1)this.add(i[n],r);return this},toString:function(){return"[Databank with "+this.size()+" triples]"}},e.rdf.databank.fn.init.prototype=e.rdf.databank.fn,e.rdf.databank.defaults={parse:!1,async:!0,success:null,error:null,depth:0,proxy:"http://www.jenitennison.com/rdfquery/proxy.php"},e.rdf.databank.load=function(e,t,r,n){void 0!==r&&g[e].load(r,n),F(g[e],t,void 0===r?"error":"success",n)},e.rdf.pattern=function(t,r,n,i){var a,o,u;if(void 0===n){if(i=r||{},o=e.trim(t).match(f),3!==o.length&&(4!==o.length||"."!==o[3]))throw"Bad Pattern: Couldn't parse string "+t;t=o[0],r=o[1],n=o[2],u=void 0===i.optional?e.rdf.pattern.defaults.optional:i.optional}return s[t]&&s[t][r]&&s[t][r][n]&&s[t][r][n][u]?s[t][r][n][u]:(a=new e.rdf.pattern.fn.init(t,r,n,i),s[a.subject]&&s[a.subject][a.property]&&s[a.subject][a.property][a.object]&&s[a.subject][a.property][a.object][a.optional]?s[a.subject][a.property][a.object][a.optional]:(void 0===s[a.subject]&&(s[a.subject]={}),void 0===s[a.subject][a.property]&&(s[a.subject][a.property]={}),void 0===s[a.subject][a.property][a.object]&&(s[a.subject][a.property][a.object]={}),s[a.subject][a.property][a.object][a.optional]=a,a))},e.rdf.pattern.fn=e.rdf.pattern.prototype={init:function(t,r,n,i){var a=e.extend({},e.rdf.pattern.defaults,i);return this.subject="?"===t.toString().substring(0,1)?t:x(t,a),this.property="?"===r.toString().substring(0,1)?r:w(r,a),this.object="?"===n.toString().substring(0,1)?n:j(n,a),this.optional=a.optional,this},fill:function(t){var r=this.subject,n=this.property,i=this.object;return"string"==typeof r&&t[r.substring(1)]&&(r=t[r.substring(1)]),"string"==typeof n&&t[n.substring(1)]&&(n=t[n.substring(1)]),"string"==typeof i&&t[i.substring(1)]&&(i=t[i.substring(1)]),e.rdf.pattern(r,n,i,{optional:this.optional})},exec:function(e){var t={};return t=I(e.subject,this.subject,t),null===t?null:(t=I(e.property,this.property,t),null===t?null:t=I(e.object,this.object,t))},isFixed:function(){return"string"!=typeof this.subject&&"string"!=typeof this.property&&"string"!=typeof this.object},triple:function(t){var r=this;return this.isFixed()||(r=this.fill(t)),r.isFixed()?e.rdf.triple(r.subject,r.property,r.object,{source:this.toString()}):null},toString:function(){return this.subject+" "+this.property+" "+this.object}},e.rdf.pattern.fn.init.prototype=e.rdf.pattern.fn,e.rdf.pattern.defaults={base:e.uri.base(),namespaces:{},optional:!1},e.rdf.triple=function(t,r,n,i){var s,o,u;
if(void 0===n){if(i=r,u=e.trim(t).match(f),3!==u.length&&(4!==u.length||"."!==u[3]))throw"Bad Triple: Couldn't parse string "+t;t=u[0],r=u[1],n=u[2]}return o=i&&i.graph||"",a[o]&&a[o][t]&&a[o][t][r]&&a[o][t][r][n]?a[o][t][r][n]:(s=new e.rdf.triple.fn.init(t,r,n,i),o=s.graph||"",a[o]&&a[o][s.subject]&&a[o][s.subject][s.property]&&a[o][s.subject][s.property][s.object]?a[o][s.subject][s.property][s.object]:(void 0===a[o]&&(a[o]={}),void 0===a[o][s.subject]&&(a[o][s.subject]={}),void 0===a[o][s.subject][s.property]&&(a[o][s.subject][s.property]={}),a[o][s.subject][s.property][s.object]=s,s))},e.rdf.triple.fn=e.rdf.triple.prototype={init:function(t,r,n,i){var a;return a=e.extend({},e.rdf.triple.defaults,i),this.subject=x(t,a),this.property=w(r,a),this.object=j(n,a),this.graph=void 0===a.graph?void 0:x(a.graph,a),this.source=a.source,this},isFixed:function(){return!0},triple:function(){return this},dump:function(){var e={},t=this.subject.value.toString(),r=this.property.value.toString();return e[t]={},e[t][r]=this.object.dump(),e},toString:function(){return this.subject+" "+this.property+" "+this.object+" ."}},e.rdf.triple.fn.init.prototype=e.rdf.triple.fn,e.rdf.triple.defaults={base:e.uri.base(),source:[document],namespaces:{}},e.rdf.resource=function(r,n){var i;return t[r]?t[r]:(i=new e.rdf.resource.fn.init(r,n),t[i]?t[i]:(t[i]=i,i))},e.rdf.resource.fn=e.rdf.resource.prototype={type:"uri",value:void 0,init:function(t,r){var n,i,a,s;if("string"==typeof t)if(n=l.exec(t),s=e.extend({},e.rdf.resource.defaults,r),null!==n)this.value=e.uri.resolve(n[1].replace(/\\>/g,">"),s.base);else if(":"===t.substring(0,1)){if(a=s.namespaces[""],void 0===a)throw"Malformed Resource: No namespace binding for default namespace in "+t;this.value=e.uri.resolve(a+t.substring(1))}else if(":"===t.substring(t.length-1)){if(i=t.substring(0,t.length-1),a=s.namespaces[i],void 0===a)throw"Malformed Resource: No namespace binding for prefix "+i+" in "+t;this.value=e.uri.resolve(a)}else try{this.value=e.curie(t,{namespaces:s.namespaces})}catch(o){throw"Malformed Resource: Bad format for resource "+o}else this.value=t;return this},dump:function(){return{type:"uri",value:this.value.toString()}},toString:function(){return"<"+this.value+">"}},e.rdf.resource.fn.init.prototype=e.rdf.resource.fn,e.rdf.resource.defaults={base:e.uri.base(),namespaces:{}},e.rdf.type=e.rdf.resource("<"+u+"type>"),e.rdf.label=e.rdf.resource("<"+d+"label>"),e.rdf.first=e.rdf.resource("<"+u+"first>"),e.rdf.rest=e.rdf.resource("<"+u+"rest>"),e.rdf.nil=e.rdf.resource("<"+u+"nil>"),e.rdf.subject=e.rdf.resource("<"+u+"subject>"),e.rdf.property=e.rdf.resource("<"+u+"property>"),e.rdf.object=e.rdf.resource("<"+u+"object>"),e.rdf.blank=function(t){var n;return r[t]?r[t]:(n=new e.rdf.blank.fn.init(t),r[n]?r[n]:(r[n]=n,n))},e.rdf.blank.fn=e.rdf.blank.prototype={type:"bnode",value:void 0,id:void 0,init:function(e){if("[]"===e)this.id=m(),this.value="_:"+this.id;else{if("_:"!==e.substring(0,2))throw"Malformed Blank Node: "+e+" is not a legal format for a blank node";this.id=e.substring(2),this.value=e}return this},dump:function(){return{type:"bnode",value:this.value}},toString:function(){return this.value}},e.rdf.blank.fn.init.prototype=e.rdf.blank.fn,e.rdf.literal=function(t,r){var i;return n[t]?n[t]:(i=new e.rdf.literal.fn.init(t,r),n[i]?n[i]:(n[i]=i,i))},e.rdf.literal.fn=e.rdf.literal.prototype={type:"literal",value:void 0,lang:void 0,datatype:void 0,init:function(t,r){var n,i,a=e.extend({},e.rdf.literal.defaults,r);if(i=e.safeCurie(a.datatype,{namespaces:a.namespaces}),void 0!==a.lang&&void 0!==a.datatype&&i.toString()!==u+"XMLLiteral")throw"Malformed Literal: Cannot define both a language and a datatype for a literal ("+t+")";if(void 0!==a.datatype)i=e.safeCurie(a.datatype,{namespaces:a.namespaces}),e.extend(this,e.typedValue(t.toString(),i)),i.toString()===u+"XMLLiteral"&&(this.lang=a.lang);else if(void 0!==a.lang)this.value=t.toString(),this.lang=a.lang;else if("boolean"==typeof t)e.extend(this,e.typedValue(t.toString(),o+"boolean"));else if("number"==typeof t)e.extend(this,e.typedValue(t.toString(),o+"double"));else if("true"===t||"false"===t)e.extend(this,e.typedValue(t,o+"boolean"));else if(e.typedValue.valid(t,o+"integer"))e.extend(this,e.typedValue(t,o+"integer"));else if(e.typedValue.valid(t,o+"decimal"))e.extend(this,e.typedValue(t,o+"decimal"));else if(e.typedValue.valid(t,o+"double")&&!/^\s*([\-\+]?INF|NaN)\s*$/.test(t))e.extend(this,e.typedValue(t,o+"double"));else{if(n=c.exec(t),null===n)throw"Malformed Literal: Couldn't recognise the value "+t;this.value=(n[2]||n[4]).replace(/\\"/g,'"').replace(/\\n/g,"\n").replace(/\\t/g,"	").replace(/\\r/g,"\r"),n[9]?(i=e.rdf.resource(n[9],a),e.extend(this,e.typedValue(this.value,i.value))):n[7]&&(this.lang=n[7])}return this},dump:function(){var e={type:"literal",value:this.value.toString()};return void 0!==this.lang?e.lang=this.lang:void 0!==this.datatype&&(e.datatype=this.datatype.toString()),e},toString:function(){var e='"'+this.value+'"';return void 0!==this.lang?e+="@"+this.lang:void 0!==this.datatype&&(e+="^^<"+this.datatype+">"),e}},e.rdf.literal.fn.init.prototype=e.rdf.literal.fn,e.rdf.literal.defaults={base:e.uri.base(),namespaces:{},datatype:void 0,lang:void 0}}(jQuery),function(e){e.rdf.parsers["application/json"]={parse:e.secureEvalJSON,serialize:e.toJSON,triples:function(t){var r,n,i,a,s,o,u,d,p=[];for(r in t){n="_:"===r.substring(0,2)?e.rdf.blank(r):e.rdf.resource("<"+r+">");for(i in t[r])for(a=e.rdf.resource("<"+i+">"),u=0;u<t[r][i].length;u+=1)s=t[r][i][u],"uri"===s.type?o=e.rdf.resource("<"+s.value+">"):"bnode"===s.type?o=e.rdf.blank(s.value):void 0!==s.datatype?o=e.rdf.literal(s.value,{datatype:s.datatype}):(d={},void 0!==s.lang&&(d.lang=s.lang),o=e.rdf.literal('"'+s.value+'"',d)),p.push(e.rdf.triple(n,a,o))}return p},dump:function(e){var t,r,n,i,a={};for(t=0;t<e.length;t+=1)r=e[t],n=r.subject.value.toString(),i=r.property.value.toString(),void 0===a[n]&&(a[n]={}),void 0===a[n][i]&&(a[n][i]=[]),a[n][i].push(r.object.dump());return a}}}(jQuery),function(e){var t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",r=function(e,t,r,n){var i,a=e.ownerDocument;return void 0!==t&&null!==t?a.createAttributeNS?(i=a.createAttributeNS(t,r),i.nodeValue=n,e.attributes.setNamedItemNS(i)):(i=a.createNode(2,r,t),i.nodeValue=n,e.attributes.setNamedItem(i)):(i=a.createAttribute(r),i.nodeValue=n,e.attributes.setNamedItem(i)),e},n=function(e,t,n){return"http://www.w3.org/XML/1998/namespace"===t||"http://www.w3.org/2000/xmlns/"===t||(n?r(e,"http://www.w3.org/2000/xmlns/","xmlns:"+n,t):r(e,void 0,"xmlns",t)),e},i=function(e,t){var r,i,a="",s=!1;return void 0!==e&&null!==e&&(/:/.test(t)&&(i=/([^:]+):/.exec(t)[1]),s=!0),document.implementation&&document.implementation.createDocument?(r=document.implementation.createDocument(e,t,null),s&&n(r.documentElement,e,i),r):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",a=void 0===i?' xmlns="'+e+'"':" xmlns:"+i+'="'+e+'"',r.loadXML("<"+t+a+"/>"),r)},a=function(e,t,r,n){var i,a=e.ownerDocument;return i=void 0!==t&&null!==t?a.createElementNS?a.createElementNS(t,r):a.createNode(1,r,t):a.createElement(r),-1!==n&&(s(e,"\n"),0===n?s(e,"\n"):s(e,"  ")),e.appendChild(i),i},s=function(e,t){var r,n=e.ownerDocument;return r=n.createTextNode(t),e.appendChild(r),e},o=function(e,t){var r,n,i;try{n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML("<temp>"+t+"</temp>")}catch(a){r=new DOMParser,n=r.parseFromString("<temp>"+t+"</temp>","text/xml")}for(i=0;i<n.documentElement.childNodes.length;i+=1)e.appendChild(n.documentElement.childNodes[i].cloneNode(!0));return e},u=function(u,d){var p,l,c,f,h,v,m,b,g,y,x,w=i(t,"rdf:RDF"),j=e.rdf.parsers["application/json"].dump(u),I=d.namespaces||{},S=d.indent||!1;for(p in I)n(w.documentElement,I[p],p);for(l in j){if(void 0!==j[l][e.rdf.type.value]){b=/(.+[#\/])([^#\/]+)/.exec(j[l][e.rdf.type.value][0].value),y=b[1],g=b[2];for(p in I)if(I[p].toString()===y){x=p;break}c=a(w.documentElement,y,x+":"+g,S?0:-1)}else c=a(w.documentElement,t,"rdf:Description",S?0:-1);/^_:/.test(l)?r(c,t,"rdf:nodeID",l.substring(2)):r(c,t,"rdf:about",l);for(f in j[l])if(f!==e.rdf.type.value.toString()||j[l][f].length>1){b=/(.+[#\/])([^#\/]+)/.exec(f),y=b[1],g=b[2];for(p in I)if(I[p].toString()===y){x=p;break}for(v=f===e.rdf.type.value.toString()?1:0;v<j[l][f].length;v+=1)m=j[l][f][v],h=a(c,y,x+":"+g,S?1:-1),"uri"===m.type?r(h,t,"rdf:resource",m.value):"literal"===m.type?void 0!==m.datatype?"http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"===m.datatype?(r(h,t,"rdf:parseType","Literal"),S&&s(h,"\n    "),o(h,m.value),S&&s(h,"\n  ")):(r(h,t,"rdf:datatype",m.datatype),s(h,m.value)):void 0!==m.lang?(r(h,"http://www.w3.org/XML/1998/namespace","xml:lang",m.lang),s(h,m.value)):s(h,m.value):r(h,t,"rdf:nodeID",m.value.substring(2));S&&s(c,"\n")}}return S&&s(w.documentElement,"\n\n"),w},d=function(e){switch(e){case"http://www.w3.org/1999/02/22-rdf-syntax-ns":return"rdf";case"http://www.w3.org/XML/1998/namespace":return"xml";case"http://www.w3.org/2000/xmlns/":return"xmlns";default:throw"No default prefix mapped for namespace "+e}},p=function(e,t,r){var n;if(e.hasAttributeNS)return e.hasAttributeNS(t,r);try{return n=/:/.test(r)?/:(.+)$/.exec(r)[1]:r,null!==e.attributes.getQualifiedItem(n,t)}catch(i){return null!==e.getAttribute(d(t)+":"+r)}},l=function(e,t,r){var n;if(e.getAttributeNS)return e.getAttributeNS(t,r);try{return n=/:/.test(r)?/:(.+)$/.exec(r)[1]:r,e.attributes.getQualifiedItem(n,t).nodeValue}catch(i){return e.getAttribute(d(t)+":"+r)}},c=function(e){return e.localName||e.baseName},f=function(r,n){var i,a;return p(r,t,"about")?(i=l(r,t,"about"),a=e.rdf.resource("<"+i+">",{base:n})):p(r,t,"ID")?(i=l(r,t,"ID"),a=e.rdf.resource("<#"+i+">",{base:n})):p(r,t,"nodeID")?(i=l(r,t,"nodeID"),a=e.rdf.blank("_:"+i)):a=e.rdf.blank("[]"),a},h=function(r,n,i,a){var s,o,u,d,v,m,a,b,g,y,x,w,j,I,S,M=1,k=[],N={},q=[];for(a=l(r,"http://www.w3.org/XML/1998/namespace","lang")||a,i=l(r,"http://www.w3.org/XML/1998/namespace","base")||i,null!==a&&void 0!==a&&""!==a&&(N={lang:a}),s=f(r,i),!n||r.namespaceURI===t&&"Description"===c(r)||(u=e.rdf.type,v=e.rdf.resource("<"+r.namespaceURI+c(r)+">"),q.push(e.rdf.triple(s,u,v))),b=0;b<r.attributes.length;b+=1)o=r.attributes.item(b),void 0!==o.namespaceURI&&"http://www.w3.org/2000/xmlns/"!==o.namespaceURI&&"http://www.w3.org/XML/1998/namespace"!==o.namespaceURI&&"xmlns"!==o.prefix&&"xml"!==o.prefix&&(o.namespaceURI!==t?(u=e.rdf.resource("<"+o.namespaceURI+c(o)+">"),v=e.rdf.literal(N.lang?o.nodeValue:'"'+o.nodeValue.replace(/"/g,'\\"')+'"',N),q.push(e.rdf.triple(s,u,v))):"type"===c(o)&&(u=e.rdf.type,v=e.rdf.resource("<"+o.nodeValue+">",{base:i}),q.push(e.rdf.triple(s,u,v))));var L=a;for(b=0;b<r.childNodes.length;b+=1)if(o=r.childNodes[b],1===o.nodeType){if(o.namespaceURI===t&&"li"===c(o)?(u=e.rdf.resource("<"+t+"_"+M+">"),M+=1):u=e.rdf.resource("<"+o.namespaceURI+c(o)+">"),a=l(o,"http://www.w3.org/XML/1998/namespace","lang")||L,N=null!==a&&void 0!==a&&""!==a?{lang:a}:{},p(o,t,"resource"))d=l(o,t,"resource"),v=e.rdf.resource("<"+d+">",{base:i});else if(p(o,t,"nodeID"))d=l(o,t,"nodeID"),v=e.rdf.blank("_:"+d);else if(p(o,t,"parseType")){if(j=l(o,t,"parseType"),"Literal"===j){try{I=new XMLSerializer,d=I.serializeToString(o.getElementsByTagName("*")[0])}catch(V){for(d="",g=0;g<o.childNodes.length;g+=1)d+=o.childNodes[g].xml}v=e.rdf.literal(d,{datatype:t+"XMLLiteral"})}else if("Resource"===j)S=h(o,!1,i,a),S.length>0?(v=S[S.length-1].subject,q=q.concat(S)):v=e.rdf.blank("[]");else if("Collection"===j)if(o.getElementsByTagName("*").length>0){for(g=0;g<o.childNodes.length;g+=1)d=o.childNodes[g],1===d.nodeType&&k.push(d);for(y=e.rdf.blank("[]"),v=y,g=0;g<k.length;g+=1)d=k[g],S=h(d,!0,i,a),S.length>0?(w=S[S.length-1].subject,q=q.concat(S)):w=f(d),q.push(e.rdf.triple(y,e.rdf.first,w)),g===k.length-1?q.push(e.rdf.triple(y,e.rdf.rest,e.rdf.nil)):(x=e.rdf.blank("[]"),q.push(e.rdf.triple(y,e.rdf.rest,x)),y=x)}else v=e.rdf.nil}else if(p(o,t,"datatype"))d=o.childNodes[0]?o.childNodes[0].nodeValue:"",v=e.rdf.literal(d,{datatype:l(o,t,"datatype")});else if(o.getElementsByTagName("*").length>0)for(g=0;g<o.childNodes.length;g+=1)d=o.childNodes[g],1===d.nodeType&&(S=h(d,!0,i,a),S.length>0?(v=S[S.length-1].subject,q=q.concat(S)):v=f(d));else o.childNodes.length>0?(d=o.childNodes[0].nodeValue,v=e.rdf.literal(N.lang?d:'"'+d.replace(/"/g,'\\"')+'"',N)):(S=h(o,!1,i,a),S.length>0?(v=S[S.length-1].subject,q=q.concat(S)):v=e.rdf.blank("[]"));q.push(e.rdf.triple(s,u,v)),p(o,t,"ID")&&(m=e.rdf.resource("<#"+l(o,t,"ID")+">",{base:i}),q.push(e.rdf.triple(m,e.rdf.subject,s)),q.push(e.rdf.triple(m,e.rdf.property,u)),q.push(e.rdf.triple(m,e.rdf.object,v)))}return q},v=function(r){var n,i=[];return r.documentElement.namespaceURI===t&&"RDF"===c(r.documentElement)?(n=l(r.documentElement,"http://www.w3.org/XML/1998/namespace","lang"),base=l(r.documentElement,"http://www.w3.org/XML/1998/namespace","base")||e.uri.base(),i=e.map(r.documentElement.childNodes,function(e){return 1===e.nodeType?h(e,!0,base,n):null})):i=h(r.documentElement,!0),i};e.rdf.parsers["application/rdf+xml"]={parse:function(e){var t;try{t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)}catch(r){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}return t},serialize:function(e){return e.xml?e.xml.replace(/\s+$/,""):(serializer=new XMLSerializer,serializer.serializeToString(e))},triples:v,dump:u}}(jQuery);